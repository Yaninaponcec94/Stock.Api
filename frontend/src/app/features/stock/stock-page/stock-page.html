<div class="stock-header">
  <h2>Movimiento de Stock</h2>

  <button
    class="btn-primary"
    routerLink="/products"
    type="button"
  >
    Volver a productos
  </button>
</div>


<button (click)="refresh()" [disabled]="isLoading">Refrescar</button>

<div *ngIf="isLoading" style="margin-top:12px; font-weight:600;">Cargando...</div>
<div *ngIf="!isLoading && error" style="margin-top:12px; color:red;">{{ error }}</div>

<table *ngIf="!isLoading && !error && items.length > 0" style="margin-top:12px; width:100%; border-collapse:collapse;">
  <thead style="background:#f5f5f5;">
  <tr>
    <th style="padding:10px; border-bottom:1px solid #e0e0e0;">Nombre Producto</th>
    <th style="padding:10px; border-bottom:1px solid #e0e0e0;">Stock Actual</th>
    <th style="padding:10px; border-bottom:1px solid #e0e0e0;">Mínimo Necesario</th>
    <th style="padding:10px; border-bottom:1px solid #e0e0e0;">Alerta</th>
 
  </tr>
</thead>


  <tbody>
  <tr *ngFor="let s of items">
    <td style="padding:10px; border-bottom:1px solid #eee;">
      {{ s.productName }}
    </td>

    <td style="padding:10px; border-bottom:1px solid #eee;">
      {{ s.quantity }}
    </td>

    <td style="padding:10px; border-bottom:1px solid #eee;">
      {{ s.minStock }}
    </td>

    <td style="padding:10px; border-bottom:1px solid #eee;">
      <span *ngIf="s.isBelowMinStock" style="color:#c62828; font-weight:600;">
        Bajo mínimo
      </span>
      <span *ngIf="!s.isBelowMinStock" style="color:#2e7d32; font-weight:600;">
        OK
      </span>
    </td>

    
    <td style="padding:10px; border-bottom:1px solid #eee;">
      <a [routerLink]="['/stock/entry', s.productId]">Entrada</a>
      |
      <a [routerLink]="['/stock/exit', s.productId]">Salida</a>
      |
      <a [routerLink]="['/stock/adjustment', s.productId]">Ajuste</a>
    </td>
  </tr>
</tbody>

</table>

<div *ngIf="!isLoading && !error && items.length === 0" style="margin-top:12px;">
  No hay datos de stock.
</div>
